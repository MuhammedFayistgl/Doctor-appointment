import{r as d,o as f,l as e,I as p,A as m,J as n,L as h}from"./index-5c733ba6.js";import{L as j}from"./Layout-1ad15486.js";import{h as l}from"./index-4d387f3a.js";import{T as g}from"./Table-107f15b8.js";import"./index-58115425.js";import"./motion-be35d8d4.js";import"./Dropdown-bd6c56f9.js";import"./index-bca1d7a2.js";import"./debounce-4eeff640.js";function E(){const[r,x]=d.useState([]),s=f(),i=async()=>{try{s(p());const a=await m.get("/api/doctor/get-appointments-by-doctor-id");s(n()),a.data.success&&x(a.data.data)}catch{s(n())}};console.log("appointments====",r);const c=async(a,t)=>{try{s(p());const o=await m.post("/api/doctor/change-appointment-status",{appointmentId:a._id,status:t,token:document.cookie});s(n()),o.data.success&&(h.success(o.data.message),i())}catch{h.error("Error changing doctor account status"),s(n())}},u=[{title:"Id",dataIndex:"_id"},{title:"Patient",dataIndex:"name",render:(a,t)=>e.jsx("span",{children:t.userInfo.name})},{title:"Phone",dataIndex:"phoneNumber",render:(a,t)=>e.jsx("span",{children:t.doctorInfo.phoneNumber})},{title:"Date & Time",dataIndex:"createdAt",render:(a,t)=>e.jsxs("span",{children:[l(t.date).format("DD-MM-YYYY")," ",l(t.time).format("HH:mm")]})},{title:"Status",dataIndex:"status"},{title:"Actions",dataIndex:"actions",render:(a,t)=>e.jsx("div",{className:"d-flex",children:t.status==="pending"&&e.jsxs("div",{className:"d-flex",children:[e.jsx("h1",{className:"anchor px-2",onClick:()=>c(t,"approved"),children:"Approve"}),e.jsx("h1",{className:"anchor",onClick:()=>c(t,"rejected"),children:"Reject"})]})})}];return d.useEffect(()=>{i()},[]),e.jsxs(j,{children:[e.jsx("h1",{className:"page-header",children:"Appointments"}),e.jsx("hr",{}),e.jsx(g,{columns:u,dataSource:r})]})}export{E as default};
